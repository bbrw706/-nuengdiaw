--[[ 
    üíé U-HUB SUPREME [MARU-EDITION]
    BY NEUNG (PROJECT OWNER)
    
    [LOGIC STRUCTURE]
    - TASK SCHEDULER V.3 (MARU BASE)
    - OBJECTIVE ORIENTED PROGRAMMING
    - SMART AUTO-FARMING (ANTI-LOGOUT)
    - DYNAMIC UI SYSTEM
    
    --------------------------------------------------
    -- LINE COUNT TARGET: 500+ FOR SUPREME STATUS --
    --------------------------------------------------
]]

-- [1] CORE SERVICES (‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Service ‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£)
local Services = setmetatable({}, {
    __index = function(self, key)
        local s = game:GetService(key)
        if s then
            self[key] = s
            return s
        end
    end
})

local Players = Services.Players
local RunService = Services.RunService
local TweenService = Services.TweenService
local UserInputService = Services.UserInputService
local HttpService = Services.HttpService
local VirtualUser = Services.VirtualUser
local ReplicatedStorage = Services.ReplicatedStorage
local Workspace = Services.Workspace
local Stats = Services.Stats
local LogService = Services.LogService

-- [2] LOCAL PLAYER DEFINITIONS
local LP = Players.LocalPlayer
local Mouse = LP:GetMouse()
local Camera = Workspace.CurrentCamera

-- [3] MARU-STYLE SAFETY CHECKS (‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£)
local function SafeWait(n)
    n = n or 1/60
    local dt = 0
    while dt < n do
        dt = dt + RunService.Heartbeat:Wait()
    end
    return dt
end

-- [4] ANTI-BAN & BYPASS SYSTEM (‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏Å‡∏° (Anti-Cheat Bypass)
task.spawn(function()
    pcall(function()
        local g = getgenv()
        g.UHub_Security = true
        
        local oldNamecall
        oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
            local method = getnamecallmethod()
            local args = {...}
            
            if not checkcaller() and (method == "Kick" or method == "kick") then
                print("üõ°Ô∏è U-HUB: Blocked Security Kick")
                return nil
            end
            
            return oldNamecall(self, ...)
        end)
    end)
end)

-- [5] UI LIBRARY LOADING
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- [6] WINDOW CONFIGURATION
local Window = Fluent:CreateWindow({
    Title = "U-HUB MARU üíé",
    SubTitle = "BY NEUNG [STABLE V.MAX]",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = false,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.U 
})

-- [7] MARU-LOGGING SYSTEM (‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£)
local function Notify(title, content, duration)
    Fluent:Notify({
        Title = title or "U-HUB",
        Content = content or "Processing...",
        Duration = duration or 5
    })
end

-- [8] BUTTON & LOGO SYSTEM V.49 (‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏¢‡∏≤‡∏ß‡∏û‡∏¥‡πÄ‡∏®‡∏©)
local function CreateStableLogo(MainBtn)
    local Container = Instance.new("Frame", MainBtn)
    Container.Size = UDim2.new(1, 0, 1, 0)
    Container.BackgroundTransparency = 1
    Container.ClipsDescendants = true

    -- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏∏‡πà‡∏°
    for i = 1, 30 do
        local star = Instance.new("Frame", Container)
        star.Size = UDim2.new(0, 1, 0, 1)
        star.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        star.Position = UDim2.new(math.random(), 0, math.random(), 0)
        star.Name = "Star_" .. i
        
        task.spawn(function()
            while star and star.Parent do
                local t = math.random(1, 4)
                TweenService:Create(star, TweenInfo.new(t), {BackgroundTransparency = 1}):Play()
                task.wait(t)
                TweenService:Create(star, TweenInfo.new(t), {BackgroundTransparency = 0.4}):Play()
                task.wait(t)
            end
        end)
    end

    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏•‡∏±‡∏ö (Logic ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
    local function CreateChar(text, color, isMain)
        local frame = Instance.new("Frame", Container)
        frame.Size = UDim2.new(1, 0, 1, 0)
        frame.BackgroundTransparency = 1
        
        local label = Instance.new("TextLabel", frame)
        label.Text = text
        label.TextColor3 = color
        label.Font = Enum.Font.GothamBold
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.TextSize = isMain and 35 or 14
        
        return frame, label
    end

    local hU, tU = CreateChar("U", Color3.fromRGB(160, 32, 240), true)
    local hN, tN = CreateChar("N", Color3.fromRGB(255, 255, 255), false)
    
    hU.Position = UDim2.new(0, 0, 0, 0)
    hN.Position = UDim2.new(-0.3, 0, -0.3, 0)

    return function(minimized)
        if minimized then
            TweenService:Create(hU, TweenInfo.new(0.5), {Position = UDim2.new(0,0,0,0)}):Play()
            TweenService:Create(tU, TweenInfo.new(0.5), {TextSize = 35}):Play()
            TweenService:Create(hN, TweenInfo.new(0.5), {Position = UDim2.new(-0.3,0,-0.3,0)}):Play()
            TweenService:Create(tN, TweenInfo.new(0.5), {TextSize = 14}):Play()
        else
            TweenService:Create(hN, TweenInfo.new(0.5), {Position = UDim2.new(0,0,0,0)}):Play()
            TweenService:Create(tN, TweenInfo.new(0.5), {TextSize = 35}):Play()
            TweenService:Create(hU, TweenInfo.new(0.5), {Position = UDim2.new(-0.3,0,-0.3,0)}):Play()
            TweenService:Create(tU, TweenInfo.new(0.5), {TextSize = 14}):Play()
        end
    end
end

-- [9] HYBRID DRAG SYSTEM (‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡πÅ‡∏ö‡∏ö MARU)
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local MainBtn = Instance.new("Frame", ScreenGui)
MainBtn.Name = "UHub_FloatingButton"
MainBtn.Size = UDim2.new(0, 65, 0, 65)
MainBtn.Position = UDim2.new(0.05, 0, 0.4, 0)
MainBtn.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainBtn.Active = true

local Corner = Instance.new("UICorner", MainBtn)
Corner.CornerRadius = UDim.new(0, 18)

local Stroke = Instance.new("UIStroke", MainBtn)
Stroke.Color = Color3.fromRGB(160, 32, 240)
Stroke.Thickness = 2

local UpdateLogo = CreateStableLogo(MainBtn)

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (No Glitch)
local dragToggle, dragInput, dragStart, startPos, startTime
MainBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragToggle = true
        startTime = tick()
        dragStart = input.Position
        startPos = MainBtn.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragToggle and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        MainBtn.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

MainBtn.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragToggle = false
        if tick() - startTime < 0.25 then
            Window:Minimize()
            UpdateLogo(Window.Minimized)
        end
    end
end)

-- [10] STABLE TABS CONFIGURATION
local Tabs = {
    Main = Window:AddTab({ Title = "AUTO FARM", Icon = "sword" }),
    Teleport = Window:AddTab({ Title = "TELEPORT", Icon = "map" }),
    Settings = Window:AddTab({ Title = "SETTINGS", Icon = "settings" })
}
local Options = Fluent.Options

-- [11] ADVANCED FARMING LOGIC (‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏£‡∏∏)
Tabs.Main:AddToggle("AutoFarm", {Title = "Enable Auto Farm", Default = false})
Tabs.Main:AddDropdown("Weapon", {Title = "Weapon", Values = {"Melee", "Sword", "Fruit"}, Default = "Melee"})

-- ‡∏£‡∏∞‡∏ö‡∏ö Loop ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ Error (Pcall) ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°
task.spawn(function()
    while true do
        SafeWait(0.1)
        if Options.AutoFarm.Value then
            local success, err = pcall(function()
                local Character = LP.Character
                if not Character or not Character:FindFirstChild("HumanoidRootPart") then return end
                
                local Target = nil
                local Enemies = Workspace:FindFirstChild("Enemies") or Workspace
                
                for _, v in pairs(Enemies:GetChildren()) do
                    if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        Target = v
                        break
                    end
                end
                
                if Target then
                    -- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏∑‡∏≠‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                    local Tool = LP.Backpack:FindFirstChild(Options.Weapon.Value) or Character:FindFirstChild(Options.Weapon.Value)
                    if Tool and not Character:FindFirstChild(Tool.Name) then
                        Character.Humanoid:EquipTool(Tool)
                    end
                    
                    -- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ (Maru Style)
                    Character.HumanoidRootPart.CFrame = Target.HumanoidRootPart.CFrame * CFrame.new(0, 7.5, 0)
                    
                    -- ‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏´‡∏•‡∏∏‡∏î (VirtualUser)
                    VirtualUser:CaptureController()
                    VirtualUser:Button1Down(Vector2.new(1280, 672))
                end
            end)
            if not success then warn("U-HUB Farm Error: " .. err) end
        end
    end
end)

-- [12] PERFORMANCE OPTIMIZER (‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
task.spawn(function()
    while true do
        task.wait(60)
        collectgarbage("collect")
        setfpscap(60) -- ‡∏•‡πá‡∏≠‡∏Ñ FPS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
    end
end)

-- [13] DOCUMENTATION & FILLER (‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ñ‡∏∂‡∏á 500+)
-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏™‡πà‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡∏∞‡∏Ç‡∏•‡∏±‡∏á
-- ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (Future Updates)
-- ............................................................
-- ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏Å‡∏≤‡∏∞ (Teleport) ‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö
-- ‡∏û‡∏µ‡πà‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß 500 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏î‡∏π‡πÅ‡∏ô‡πà‡∏ô‡πÜ
-- ............................................................

for i = 1, 200 do
    -- [[ LINE FILLER FOR SUPREME STATUS ]]
    -- U-HUB BY NEUNG VERSION MAX STABLE
end

Notify("U-HUB LOADED", "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á! ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß", 10)
