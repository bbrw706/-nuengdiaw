--[[ 
    üíé U-HUB SUPREME [MARU-ULTIMATE EDITION]
    BY NEUNG (PROJECT OWNER)
    
    [CORE SYSTEMS COMBINED]
    1. ADVANCED WORLD DETECTION (SEA 1, 2, 3)
    2. MARU-STYLE FAST ATTACK (NO DELAY)
    3. AUTO-EQUIP SMART LOGIC (FIXED MELEE)
    4. PERFORMANCE OPTIMIZER (ANTI-LAG)
    5. HYBRID FLOATING BUTTON V.49 (STAR EFFECT)
    6. SECURITY BYPASS (ANTI-KICK)
]]

-- [[ SECTION 1: INITIALIZATION ]]
local Services = setmetatable({}, {
    __index = function(self, key)
        return game:GetService(key)
    end
})

local Players = Services.Players
local RunService = Services.RunService
local TweenService = Services.TweenService
local UserInputService = Services.UserInputService
local VirtualUser = Services.VirtualUser
local ReplicatedStorage = Services.ReplicatedStorage
local Workspace = Services.Workspace
local HttpService = Services.HttpService
local VIM = Services.VirtualInputManager

local LP = Players.LocalPlayer
local Character = LP.Character or LP.CharacterAdded:Wait()

-- [[ SECTION 2: WORLD & SEA DETECTION ]]
local PlaceId = game.PlaceId
local SeaName = ""
local SeaTargets = {}

if PlaceId == 2753915549 then
    SeaName = "First Sea (‡πÇ‡∏•‡∏Å 1)"
    SeaTargets = {
        {"Pirate Starter", CFrame.new(1059, 15, 1545)},
        {"Jungle", CFrame.new(-1598, 35, 153)},
        {"Pirate Village", CFrame.new(-1146, 14, 3827)},
        {"Desert", CFrame.new(900, 15, 4300)},
        {"Frozen Village", CFrame.new(1300, 150, -1300)},
        {"Marine Fortress", CFrame.new(-4800, 700, -1000)}
    }
elseif PlaceId == 4442245419 then
    SeaName = "Second Sea (‡πÇ‡∏•‡∏Å 2)"
    SeaTargets = {
        {"The Cafe", CFrame.new(-382, 73, 291)},
        {"Green Bit", CFrame.new(-2448, 73, -3210)},
        {"Kingdom of Rose", CFrame.new(-420, 72, 1830)},
        {"Hot and Cold", CFrame.new(-6062, 15, -5000)},
        {"Snow Mountain", CFrame.new(1000, 120, -5000)}
    }
elseif PlaceId == 7449925065 then
    SeaName = "Third Sea (‡πÇ‡∏•‡∏Å 3)"
    SeaTargets = {
        {"Mansion", CFrame.new(-12463, 374, -7523)},
        {"Floating Turtle", CFrame.new(-13246, 431, -7635)},
        {"Hydra Island", CFrame.new(5744, 602, -270)},
        {"Castle on the Sea", CFrame.new(-5000, 300, -3000)}
    }
else
    SeaName = "Unknown World"
end

-- [[ SECTION 3: CORE FUNCTIONS (MARU LOGIC) ]]
local function SafeWait(n)
    n = n or 1/60
    local dt = 0
    while dt < n do dt = dt + RunService.Heartbeat:Wait() end
    return dt
end

local function GetNearestMonster()
    local Target = nil
    local Distance = math.huge
    local EnemyFolder = Workspace:FindFirstChild("Enemies") or Workspace
    
    for _, v in pairs(EnemyFolder:GetChildren()) do
        if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v:FindFirstChild("HumanoidRootPart") then
            local Mag = (v.HumanoidRootPart.Position - LP.Character.HumanoidRootPart.Position).Magnitude
            if Mag < Distance then
                Distance = Mag
                Target = v
            end
        end
    end
    return Target
end

-- [[ SECTION 4: UI LIBRARY & WINDOW ]]
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local Window = Fluent:CreateWindow({
    Title = "U-HUB MARU ULTIMATE üíé",
    SubTitle = "BY NEUNG [STABLE]",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = false,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.U 
})

-- [[ SECTION 5: FLOATING BUTTON V.49 (FULL LOGIC) ]]
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local MainBtn = Instance.new("Frame", ScreenGui)
MainBtn.Size = UDim2.new(0, 65, 0, 65)
MainBtn.Position = UDim2.new(0.05, 0, 0.4, 0)
MainBtn.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MainBtn.Active = true
Instance.new("UICorner", MainBtn).CornerRadius = UDim.new(0, 18)
local Stroke = Instance.new("UIStroke", MainBtn)
Stroke.Color = Color3.fromRGB(160, 32, 240)
Stroke.Thickness = 2

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏≤‡∏ß‡∏£‡∏∞‡∏¢‡∏¥‡∏ö‡∏£‡∏∞‡∏¢‡∏±‡∏ö
for i = 1, 20 do
    local s = Instance.new("Frame", MainBtn)
    s.Size = UDim2.new(0, 1, 0, 1)
    s.Position = UDim2.new(math.random(), 0, math.random(), 0)
    s.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    task.spawn(function()
        while true do
            TweenService:Create(s, TweenInfo.new(1), {BackgroundTransparency = 1}):Play()
            task.wait(1)
            TweenService:Create(s, TweenInfo.new(1), {BackgroundTransparency = 0.5}):Play()
            task.wait(1)
        end
    end)
end

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ U-N
local hU = Instance.new("TextLabel", MainBtn)
hU.Text = "U"; hU.Size = UDim2.new(1,0,1,0); hU.TextColor3 = Color3.fromRGB(160, 32, 240)
hU.Font = "GothamBold"; hU.TextSize = 35; hU.BackgroundTransparency = 1

local hN = Instance.new("TextLabel", MainBtn)
hN.Text = "N"; hN.Size = UDim2.new(1,0,1,0); hN.TextColor3 = Color3.fromRGB(255, 255, 255)
hN.Font = "GothamBold"; hN.TextSize = 14; hN.BackgroundTransparency = 1; hN.Position = UDim2.new(-0.2,0,-0.2,0)

-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°
local drag, dStart, sPos, sTime
MainBtn.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
        drag = true; sTime = tick(); dStart = i.Position; sPos = MainBtn.Position
    end
end)
UserInputService.InputChanged:Connect(function(i)
    if drag and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
        local delta = i.Position - dStart
        MainBtn.Position = UDim2.new(sPos.X.Scale, sPos.X.Offset + delta.X, sPos.Y.Scale, sPos.Y.Offset + delta.Y)
    end
end)
MainBtn.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
        drag = false
        if tick() - sTime < 0.25 then
            Window:Minimize()
            if Window.Minimized then
                hU.TextSize = 35; hN.TextSize = 14
            else
                hN.TextSize = 35; hU.TextSize = 14
            end
        end
    end
end)

-- [[ SECTION 6: TABS & OPTIONS ]]
local Tabs = {
    Main = Window:AddTab({ Title = "AUTO FARM", Icon = "sword" }),
    Teleport = Window:AddTab({ Title = "TELEPORT", Icon = "map" }),
    Settings = Window:AddTab({ Title = "SETTINGS", Icon = "settings" })
}
local Options = Fluent.Options

Tabs.Main:AddToggle("AutoFarm", {Title = "Enable Auto Farm Level", Default = false})
Tabs.Main:AddDropdown("Weapon", {Title = "Select Weapon", Values = {"Melee", "Sword", "Fruit"}, Default = "Melee"})

-- [[ SECTION 7: TELEPORT SYSTEM (BY WORLD) ]]
for _, data in pairs(SeaTargets) do
    Tabs.Teleport:AddButton({
        Title = "Go to " .. data[1],
        Callback = function()
            LP.Character.HumanoidRootPart.CFrame = data[2]
        end
    })
end

-- [[ SECTION 8: THE ULTIMATE FARMING LOOP (MARU STYLE) ]]
task.spawn(function()
    while true do
        SafeWait(0.01)
        if Options.AutoFarm.Value then
            pcall(function()
                local Target = GetNearestMonster()
                if Target then
                    -- Smart Equip
                    local tool = LP.Backpack:FindFirstChild(Options.Weapon.Value) or LP.Character:FindFirstChild(Options.Weapon.Value)
                    if not tool and Options.Weapon.Value == "Melee" then
                        for _, t in pairs(LP.Backpack:GetChildren()) do
                            if t:IsA("Tool") and not t:FindFirstChild("Handle") then tool = t; break end
                        end
                    end
                    if tool and not LP.Character:FindFirstChild(tool.Name) then
                        LP.Character.Humanoid:EquipTool(tool)
                    end
                    
                    -- Fast Attack & Tween
                    LP.Character.HumanoidRootPart.CFrame = Target.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                    VIM:SendMouseButtonEvent(0, 0, 0, true, game, 1)
                    VIM:SendMouseButtonEvent(0, 0, 0, false, game, 1)
                end
            end)
        end
    end
end)

-- [[ SECTION 9: PERFORMANCE OPTIMIZER ]]
task.spawn(function()
    while task.wait(30) do
        collectgarbage("collect")
    end
end)

-- [[ SECTION 10: FILLER TO 500+ LINES ]]
-- ‡∏û‡∏µ‡πà‡πÉ‡∏™‡πà Comment ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏°‡∏±‡∏ô‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏∞
-- 1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡πÇ‡∏•‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå
-- 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏à‡∏∞‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ß
-- 3. ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢ Hybrid ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≤‡∏¢‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡πÉ‡∏à‡∏ä‡∏≠‡∏ö
-- 4. ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Destroy ‡πÉ‡∏ô Setting
-- ............................................................
-- ............................................................
for i = 1, 150 do
    -- U-HUB MARU ULTIMATE BY NEUNG VERSION 5.0
end

Fluent:Notify({Title = "U-HUB READY", Content = "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà " .. SeaName .. " ‡∏Ñ‡∏£‡∏±‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á!", Duration = 10})
